/**
 * Modelo para Histórico de Bases de Veículos
 * Este modelo rastreia todas as transferências de veículos entre bases,
 * mantendo um histórico completo de onde cada veículo esteve e quando.
 * CASOS DE USO:
 * - Rastrear transferências de veículos entre bases
 * - Auditoria de movimentações
 * - Relatórios de histórico de bases
 * - Controle de localização atual e passada
 */

model VeiculoBaseHistorico {
  id Int @id @default(autoincrement())

  // Relacionamentos principais
  veiculoId Int
  veiculo   Veiculo @relation(fields: [veiculoId], references: [id])

  baseId Int
  base   Base @relation(fields: [baseId], references: [id])

  // Controle de período
  dataInicio DateTime // Quando o veículo chegou nesta base
  dataFim    DateTime? // Quando o veículo saiu desta base (null = ainda está na base)

  // Motivo da transferência
  motivo String? @db.VarChar(500) // Motivo da transferência (opcional)

  // Auditoria
  createdAt DateTime  @default(now())
  createdBy String    @db.VarChar(255)
  updatedAt DateTime? @updatedAt
  updatedBy String?   @db.VarChar(255)
  deletedAt DateTime?
  deletedBy String?   @db.VarChar(255)

  // Índices para performance
  @@index([veiculoId])
  @@index([baseId])
  @@index([dataInicio])
  @@index([dataFim])
  @@index([veiculoId, dataInicio])
}
